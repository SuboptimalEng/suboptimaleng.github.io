(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{3533:function(i,t,e){"use strict";e.d(t,{W:function(){return o}});var n=e(2777),s=e(2262),o=function(){function i(){(0,n.Z)(this,i)}return(0,s.Z)(i,null,[{key:"removeCanvas",value:function(){var i=document.getElementById("myThreeJsCanvas");i.parentNode.removeChild(i)}},{key:"maybeCreateCanvas",value:function(){var i=document.getElementById("myThreeJsCanvas");i||((i=document.createElement("canvas")).id="myThreeJsCanvas",document.body.appendChild(i))}}]),i}()},0:function(i,t,e){"use strict";e.r(t),e.d(t,{default:function(){return P}});var n=e(7294),s=e(3533),o=e(2777),a=e(2262),r=e(9499),d=e(9477),h=function(){function i(){(0,o.Z)(this,i),(0,r.Z)(this,"gg",void 0),(0,r.Z)(this,"boardSize",void 0),(0,r.Z)(this,"boardPositions",void 0),(0,r.Z)(this,"portalPairs",void 0),(0,r.Z)(this,"portalPairPositions",void 0),this.gg=new d.ZAu,this.boardSize=15,this.boardPositions=[];for(var t=-1*Math.floor(this.boardSize/2),e=Math.floor(this.boardSize/2),n=t;n<=e;n++)for(var s=t;s<=e;s++)this.boardPositions.push({x:n,y:s,z:-1});this._initializeBoard(),this.portalPairs=1,this.portalPairPositions=[[{x:-4,y:-4,z:-1},{x:4,y:4,z:-1}]],this._initializePortalPairs()}return(0,a.Z)(i,[{key:"_initializePortalPairs",value:function(){var i=this;this.portalPairPositions.forEach((function(t){var e=t[0],n=t[1];i._createIndividualPortal(e),i._createIndividualPortal(n)}))}},{key:"_createIndividualPortal",value:function(i){var t=new d.DvJ(1,1,1),e=new d.xoR({color:16711680}),n=new d.Kj0(t,e);n.position.x=i.x,n.position.y=i.y,n.position.z=i.z,this.gg.add(n)}},{key:"_initializeBoard",value:function(){var i=this;this.boardPositions.forEach((function(t){i._createIndividualBoardPart(t)}))}},{key:"_createIndividualBoardPart",value:function(i){var t=new d.DvJ(1,1,1),e=new d.RSm({wireframe:!0}),n=new d.Kj0(t,e);n.position.x=i.x,n.position.y=i.y,n.position.z=i.z,this.gg.add(n)}}]),i}(),c=e(6194),v=function(){function i(t,e){(0,o.Z)(this,i),(0,r.Z)(this,"gg",void 0),(0,r.Z)(this,"clock",void 0),(0,r.Z)(this,"timestep",void 0),(0,r.Z)(this,"isMoving",void 0),(0,r.Z)(this,"bodyPositions",void 0),(0,r.Z)(this,"speed",1),(0,r.Z)(this,"xSpeed",0),(0,r.Z)(this,"ySpeed",0),(0,r.Z)(this,"portalPairs",void 0),(0,r.Z)(this,"portalPairPositions",void 0),this.portalPairs=t,this.portalPairPositions=e,this.gg=new d.ZAu,this.clock=new d.SUY,this.clock.start(),this.bodyPositions=[{x:0,y:0,z:0},{x:1,y:0,z:0},{x:1,y:1,z:0},{x:1,y:2,z:0},{x:1,y:3,z:0},{x:1,y:4,z:0},{x:1,y:5,z:0},{x:1,y:6,z:0}],this.timestep=100,this.isMoving=!1,this._initializeSnake()}return(0,a.Z)(i,[{key:"_initializeSnake",value:function(){var i=this;this.bodyPositions.forEach((function(t){i._createIndividualSnakePart(t)}))}},{key:"_createIndividualSnakePart",value:function(i){var t=new d.DvJ(1,1,1),e=new d.RSm,n=new d.Kj0(t,e);n.position.x=i.x,n.position.y=i.y,this.gg.add(n)}},{key:"render",value:function(){for(var i=0;i<this.bodyPositions.length;i++){var t=this.bodyPositions[i],e=t.x,n=t.y;this.gg.children[i].position.set(e,n,0)}}},{key:"update",value:function(i){var t=this;if(c.Vx(i),this.isMoving&&(this.render(),!(this.clock.getElapsedTime()<.5))){this.clock.start();for(var e=function(i){var e={x:t.bodyPositions[i].x,y:t.bodyPositions[i].y,z:t.bodyPositions[i].z},n=void 0;if(0===i){n={x:t.bodyPositions[0].x+t.xSpeed,y:t.bodyPositions[0].y+t.ySpeed,z:t.bodyPositions[0].z};var s=t.portalPairPositions[0][0],o=t.portalPairPositions[0][1];console.log(s,s,n),Math.abs(n.x-s.x)<.01&&Math.abs(n.y-s.y)<.01&&(n.x=o.x,n.y=o.y),Math.abs(n.x-o.x)<.01&&Math.abs(n.y-o.y)<.01&&(n.x=s.x,n.y=s.y)}else n={x:t.bodyPositions[i-1].x,y:t.bodyPositions[i-1].y,z:t.bodyPositions[i-1].z};new c.kX(e).to(n,500).easing(c.oY.Cubic.InOut).onUpdate((function(){t.bodyPositions[i].x=e.x,t.bodyPositions[i].y=e.y,t.bodyPositions[i].z=e.z})).start()},n=0;n<this.bodyPositions.length;n++)e(n)}}},{key:"handleMovement",value:function(i){["w","a","s","d"].includes(i.key)?this.isMoving=!0:this.isMoving=!1,"w"===i.key?(this.xSpeed=0,this.ySpeed=this.speed):"a"===i.key?(this.xSpeed=-this.speed,this.ySpeed=0):"s"===i.key?(this.xSpeed=0,this.ySpeed=-this.speed):"d"===i.key&&(this.xSpeed=this.speed,this.ySpeed=0)}}]),i}(),u=e(9365),l=e(5079),y=function(){function i(t){var e=this;(0,o.Z)(this,i),(0,r.Z)(this,"canvasId",void 0),(0,r.Z)(this,"fov",void 0),(0,r.Z)(this,"nearPlane",void 0),(0,r.Z)(this,"farPlane",void 0),(0,r.Z)(this,"canvas",void 0),(0,r.Z)(this,"onWindowResize",void 0),(0,r.Z)(this,"scene",void 0),(0,r.Z)(this,"camera",void 0),(0,r.Z)(this,"renderer",void 0),(0,r.Z)(this,"clock",void 0),(0,r.Z)(this,"stats",void 0),(0,r.Z)(this,"controls",void 0),(0,r.Z)(this,"ambientLight",void 0),(0,r.Z)(this,"directionalLight",void 0),this.fov=45,this.nearPlane=1,this.farPlane=1e3,this.canvasId=t,this.scene=new d.xsS,this.camera=new d.cPb(this.fov,window.innerWidth/window.innerHeight,this.nearPlane,this.farPlane),this.camera.position.z=24,this.camera.position.y=8,this.canvas=document.getElementById(this.canvasId),this.renderer=new d.CP7({canvas:this.canvas,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.clock=new d.SUY,this.controls=new u.z(this.camera,this.renderer.domElement),this.stats=(0,l.Z)(),document.body.appendChild(this.stats.dom),this.ambientLight=new d.Mig(16777215,.5),this.ambientLight.castShadow=!0,this.scene.add(this.ambientLight),this.directionalLight=new d.Ox3(16777215,1),this.directionalLight.position.set(0,32,64),this.scene.add(this.directionalLight),this.onWindowResize=function(){console.log("resize"),e.camera.aspect=window.innerWidth/window.innerHeight,e.camera.updateProjectionMatrix(),e.renderer.setSize(window.innerWidth,window.innerHeight)},window.addEventListener("resize",this.onWindowResize,!1)}return(0,a.Z)(i,[{key:"destroy",value:function(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.scene.removeFromParent(),this.camera.removeFromParent(),document.body.removeChild(this.stats.dom),window.removeEventListener("resize",this.onWindowResize)}},{key:"update",value:function(){this.render(),this.stats.update(),this.controls.update()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),i}(),p=e(5893);var P=function(){var i=(0,n.useRef)(0);return(0,n.useEffect)((function(){s.W.maybeCreateCanvas();var t=new y("myThreeJsCanvas"),e=new h;t.scene.add(e.gg);var n=new v(e.portalPairs,e.portalPairPositions);t.scene.add(n.gg);return requestAnimationFrame((function e(s){t.update(),n.update(s),i.current=window.requestAnimationFrame(e)})),window.addEventListener("keydown",(function(i){return n.handleMovement(i)})),function(){console.log("on component unmount"),t.destroy(),window.cancelAnimationFrame(i.current),s.W.removeCanvas()}})),(0,p.jsx)("div",{children:(0,p.jsx)("canvas",{id:"myThreeJsCanvas"})})}},3103:function(i,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/snake",function(){return e(0)}])}},function(i){i.O(0,[737,273,774,888,179],(function(){return t=3103,i(i.s=t);var t}));var t=i.O();_N_E=t}]);