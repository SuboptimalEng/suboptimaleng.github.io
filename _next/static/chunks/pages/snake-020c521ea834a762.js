(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[765],{3533:function(e,i,t){"use strict";t.d(i,{W:function(){return o}});var n=t(2777),s=t(2262),o=function(){function e(){(0,n.Z)(this,e)}return(0,s.Z)(e,null,[{key:"removeCanvas",value:function(){var e=document.getElementById("myThreeJsCanvas");e.parentNode.removeChild(e)}},{key:"maybeCreateCanvas",value:function(){var e=document.getElementById("myThreeJsCanvas");e||((e=document.createElement("canvas")).id="myThreeJsCanvas",document.body.appendChild(e))}}]),e}()},226:function(e,i,t){"use strict";t.r(i),t.d(i,{default:function(){return m}});var n=t(7294),s=t(3533),o=t(2777),a=t(2262),d=t(9499),r=t(9477),h=t(6194),c=function(){function e(){(0,o.Z)(this,e),(0,d.Z)(this,"gg",void 0),(0,d.Z)(this,"clock",void 0),(0,d.Z)(this,"timestep",void 0),(0,d.Z)(this,"isMoving",void 0),(0,d.Z)(this,"bodyPositions",void 0),(0,d.Z)(this,"speed",1),(0,d.Z)(this,"xSpeed",0),(0,d.Z)(this,"ySpeed",0),this.gg=new r.ZAu,this.clock=new r.SUY,this.clock.start(),this.bodyPositions=[{x:0,y:0},{x:1,y:0},{x:1,y:1},{x:1,y:2},{x:1,y:3},{x:1,y:4},{x:1,y:5},{x:1,y:6}],this.timestep=100,this.isMoving=!1,this._initializeSnake()}return(0,a.Z)(e,[{key:"_initializeSnake",value:function(){var e=this;this.bodyPositions.forEach((function(i){e._createIndividualSnakePart(i)}))}},{key:"_createIndividualSnakePart",value:function(e){var i=new r.DvJ(1,1,1),t=new r.RSm,n=new r.Kj0(i,t);n.position.x=e.x,n.position.y=e.y,this.gg.add(n)}},{key:"render",value:function(){for(var e=0;e<this.bodyPositions.length;e++){var i=this.bodyPositions[e],t=i.x,n=i.y;this.gg.children[e].position.set(t,n,0)}}},{key:"update",value:function(e){var i=this;if(h.Vx(e),this.isMoving&&(this.render(),!(this.clock.getElapsedTime()<.5))){this.clock.start();for(var t=function(e){var t={x:i.bodyPositions[e].x,y:i.bodyPositions[e].y},n=void 0;n=0===e?{x:i.bodyPositions[0].x+i.xSpeed,y:i.bodyPositions[0].y+i.ySpeed}:{x:i.bodyPositions[e-1].x,y:i.bodyPositions[e-1].y},new h.kX(t).to(n,500).easing(h.oY.Cubic.InOut).onUpdate((function(){i.bodyPositions[e].x=t.x,i.bodyPositions[e].y=t.y})).start()},n=0;n<this.bodyPositions.length;n++)t(n)}}},{key:"handleMovement",value:function(e){["w","a","s","d"].includes(e.key)&&(this.isMoving=!0),"w"===e.key?(this.xSpeed=0,this.ySpeed=this.speed):"a"===e.key?(this.xSpeed=-this.speed,this.ySpeed=0):"s"===e.key?(this.xSpeed=0,this.ySpeed=-this.speed):"d"===e.key&&(this.xSpeed=this.speed,this.ySpeed=0)}}]),e}(),u=t(9365),v=t(5079),y=function(){function e(i){var t=this;(0,o.Z)(this,e),(0,d.Z)(this,"canvasId",void 0),(0,d.Z)(this,"fov",void 0),(0,d.Z)(this,"nearPlane",void 0),(0,d.Z)(this,"farPlane",void 0),(0,d.Z)(this,"canvas",void 0),(0,d.Z)(this,"onWindowResize",void 0),(0,d.Z)(this,"scene",void 0),(0,d.Z)(this,"camera",void 0),(0,d.Z)(this,"renderer",void 0),(0,d.Z)(this,"clock",void 0),(0,d.Z)(this,"stats",void 0),(0,d.Z)(this,"controls",void 0),(0,d.Z)(this,"ambientLight",void 0),(0,d.Z)(this,"directionalLight",void 0),this.fov=45,this.nearPlane=1,this.farPlane=1e3,this.canvasId=i,this.scene=new r.xsS,this.camera=new r.cPb(this.fov,window.innerWidth/window.innerHeight,this.nearPlane,this.farPlane),this.camera.position.z=24,this.camera.position.y=8,this.canvas=document.getElementById(this.canvasId),this.renderer=new r.CP7({canvas:this.canvas,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.clock=new r.SUY,this.controls=new u.z(this.camera,this.renderer.domElement),this.stats=(0,v.Z)(),document.body.appendChild(this.stats.dom),this.ambientLight=new r.Mig(16777215,.5),this.ambientLight.castShadow=!0,this.scene.add(this.ambientLight),this.directionalLight=new r.Ox3(16777215,1),this.directionalLight.position.set(0,32,64),this.scene.add(this.directionalLight),this.onWindowResize=function(){console.log("resize"),t.camera.aspect=window.innerWidth/window.innerHeight,t.camera.updateProjectionMatrix(),t.renderer.setSize(window.innerWidth,window.innerHeight)},window.addEventListener("resize",this.onWindowResize,!1)}return(0,a.Z)(e,[{key:"destroy",value:function(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.scene.removeFromParent(),this.camera.removeFromParent(),document.body.removeChild(this.stats.dom),window.removeEventListener("resize",this.onWindowResize)}},{key:"update",value:function(){this.render(),this.stats.update(),this.controls.update()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}}]),e}(),l=t(5893);var m=function(){var e=(0,n.useRef)(0);return(0,n.useEffect)((function(){s.W.maybeCreateCanvas();var i=new y("myThreeJsCanvas"),t=new c;i.scene.add(t.gg);return requestAnimationFrame((function n(s){i.update(),t.update(s),e.current=window.requestAnimationFrame(n)})),window.addEventListener("keydown",(function(e){return t.handleMovement(e)})),function(){console.log("on component unmount"),i.destroy(),window.cancelAnimationFrame(e.current),s.W.removeCanvas()}})),(0,l.jsx)("div",{children:(0,l.jsx)("canvas",{id:"myThreeJsCanvas"})})}},3103:function(e,i,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/snake",function(){return t(226)}])}},function(e){e.O(0,[737,273,774,888,179],(function(){return i=3103,e(e.s=i);var i}));var i=e.O();_N_E=i}]);