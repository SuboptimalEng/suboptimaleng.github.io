(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[822],{2354:function(t,e,n){"use strict";function o(t,e,n,o,i,a,s){try{var r=t[a](s),h=r.value}catch(c){return void n(c)}r.done?e(h):Promise.resolve(h).then(o,i)}n.r(e),n.d(e,{default:function(){return f}});var i=n(7794),a=n.n(i),s=n(7294),r=n(3687),h=n(9477);function c(t,e,n){let{color:o=65280,scale:i=1,onInit:a,onUpdate:s}=void 0===n?{}:n;const c=[],d=new h.vBJ({color:null!=o?o:65280,wireframe:!0}),u=new r.AO,p=new r.AO,l=new r.AO,m=new r._f,f=new h.xo$(1),y=new h.DvJ(1,1,1),w=new h._12(10,10,10,10);function v(e){let n=new h.Kj0;const{SPHERE:o,BOX:i,PLANE:a,CYLINDER:s,CONVEXPOLYHEDRON:c,TRIMESH:m,HEIGHTFIELD:v}=r.bn.types;switch(e.type){case o:n=new h.Kj0(f,d);break;case i:n=new h.Kj0(y,d);break;case a:n=new h.Kj0(w,d);break;case s:{const t=new h.fHI(e.radiusTop,e.radiusBottom,e.height,e.numSegments);n=new h.Kj0(t,d),e.geometryId=t.id;break}case c:{const t=function(t){const e=new h.u9r,n=[];for(let i=0;i<t.vertices.length;i++){const e=t.vertices[i];n.push(e.x,e.y,e.z)}e.setAttribute("position",new h.a$l(n,3));const o=[];for(let i=0;i<t.faces.length;i++){const e=t.faces[i],n=e[0];for(let t=1;t<e.length-1;t++){const i=e[t],a=e[t+1];o.push(n,i,a)}}return e.setIndex(o),e.computeBoundingSphere(),e.computeVertexNormals(),e}(e);n=new h.Kj0(t,d),e.geometryId=t.id;break}case m:{const t=function(t){const e=new h.u9r,n=[],o=u,i=p,a=l;for(let s=0;s<t.indices.length/3;s++)t.getTriangleVertices(s,o,i,a),n.push(o.x,o.y,o.z),n.push(i.x,i.y,i.z),n.push(a.x,a.y,a.z);return e.setAttribute("position",new h.a$l(n,3)),e.computeBoundingSphere(),e.computeVertexNormals(),e}(e);n=new h.Kj0(t,d),e.geometryId=t.id;break}case v:{const t=function(t){const e=new h.u9r,n=t.elementSize||1,o=t.data.flatMap(((t,e)=>t.flatMap(((t,o)=>[e*n,o*n,t])))),i=[];for(let a=0;a<t.data.length-1;a++)for(let e=0;e<t.data[a].length-1;e++){const n=t.data[a].length,o=a*n+e;i.push(o+1,o+n,o+n+1),i.push(o+n,o+1,o)}return e.setIndex(i),e.setAttribute("position",new h.a$l(o,3)),e.computeBoundingSphere(),e.computeVertexNormals(),e}(e);n=new h.Kj0(t,d),e.geometryId=t.id;break}}return t.add(n),n}function g(e,n){let o=c[e],a=!1;return function(t,e){if(!t)return!1;const{geometry:n}=t;return n instanceof h.xo$&&e.type===r.bn.types.SPHERE||n instanceof h.DvJ&&e.type===r.bn.types.BOX||n instanceof h._12&&e.type===r.bn.types.PLANE||n.id===e.geometryId&&e.type===r.bn.types.CYLINDER||n.id===e.geometryId&&e.type===r.bn.types.CONVEXPOLYHEDRON||n.id===e.geometryId&&e.type===r.bn.types.TRIMESH||n.id===e.geometryId&&e.type===r.bn.types.HEIGHTFIELD}(o,n)||(o&&t.remove(o),c[e]=o=v(n),a=!0),function(t,e){const{SPHERE:n,BOX:o,PLANE:a,CYLINDER:s,CONVEXPOLYHEDRON:h,TRIMESH:c,HEIGHTFIELD:d}=r.bn.types;switch(e.type){case n:{const{radius:n}=e;t.scale.set(n*i,n*i,n*i);break}case o:t.scale.copy(e.halfExtents),t.scale.multiplyScalar(2*i);break;case a:break;case s:case h:t.scale.set(1*i,1*i,1*i);break;case c:t.scale.copy(e.scale).multiplyScalar(i);break;case d:t.scale.set(1*i,1*i,1*i)}}(o,n),a}return w.translate(0,0,1e-4),{update:function(){const n=c,o=u,i=m;let r=0;for(const t of e.bodies)for(let e=0;e!==t.shapes.length;e++){const h=t.shapes[e],c=g(r,h),d=n[r];d&&(t.quaternion.vmult(t.shapeOffsets[e],o),t.position.vadd(o,o),t.quaternion.mult(t.shapeOrientations[e],i),d.position.copy(o),d.quaternion.copy(i),c&&a instanceof Function&&a(t,d,h),!c&&s instanceof Function&&s(t,d,h)),r++}for(let e=r;e<n.length;e++){const o=n[e];o&&t.remove(o)}n.length=r}}}var d=n(2777),u=n(2262),p=function(){function t(){(0,d.Z)(this,t),this.x=0,this.y=0,this.z=0,this.phantomX=0,this.phantomY=0,this.phantomZ=0,this.groundX=0,this.groundY=-1,this.groundZ=0,this.size=1,this.mass=10,this.existingBlocks=[],this.phantomBlockAccepted=!1,this.gameLoopLength=.5,this.currentLoopLength=0,this.phantomShape=void 0,this.world=new r.q3({gravity:new r.AO(0,-10,0)}),this._addGround(),this._addCompoundBody(),this.gg=new h.ZAu,this._initGame(),this._renderInitialBlock(),this._renderPhantomBlock()}return(0,u.Z)(t,[{key:"update",value:function(t){this.world.fixedStep(),this.currentLoopLength+=t,this.currentLoopLength>this.gameLoopLength&&(this.currentLoopLength=0,this._displayPhantomBlock())}},{key:"_updateCenterOfMass",value:function(){var t=new r.AO;this.compoundBody.shapeOffsets.forEach((function(e){t.vadd(e,t)})),t.scale(1/this.compoundBody.shapes.length,t),this.compoundBody.shapeOffsets.forEach((function(e){e.vsub(t,e)}));var e=new r.AO;this.compoundBody.vectorToWorldFrame(t,e),this.compoundBody.position.vadd(e,this.compoundBody.position)}},{key:"_randomizePhantomXYZ",value:function(){var t=this;this._updatePhantomXYZ();var e=function(){var e=Math.floor(3*Math.random()),n=0===Math.floor(2*Math.random())?1:-1;0===e?t.phantomX+=n:1===e?t.y<=.1?t.phantomY=1:t.phantomY+=n:t.phantomZ+=n};e();for(;t.existingBlocks.some((function(e){return e.x===t.phantomX&&e.y===t.phantomY&&e.z===t.phantomZ}));)this._updatePhantomXYZ(),e()}},{key:"addBlockToScene",value:function(t,e,n){var o=new h.DvJ(1,1,1),i=new h.xoR({color:16448250}),a=new h.Kj0(o,i);a.position.x=t,a.position.y=e,a.position.z=n,this.compoundShapeGroup.add(a)}},{key:"_addPhantomBlock",value:function(t,e,n){var o=new h.DvJ(1,1,1),i=new h.xoR({color:6413307,transparent:!0,opacity:.5});this.phantomMesh=new h.Kj0(o,i);var a=this.compoundBody.shapeOffsets[0].x,s=this.compoundBody.shapeOffsets[0].y,r=this.compoundBody.shapeOffsets[0].z;this.phantomMesh.position.x=t+a,this.phantomMesh.position.y=e+s,this.phantomMesh.position.z=n+r,this.phantomGroup.add(this.phantomMesh)}},{key:"_displayPhantomBlock",value:function(){this._randomizePhantomXYZ(),this.phantomBlockAccepted?(this.phantomBlockAccepted=!1,this.addBlockToScene(this.x,this.y,this.z),console.log(this.compoundBody.shapeOffsets)):this.compoundBody.removeShape(this.phantomShape),this.phantomShape=new r.xu(new r.AO(.5*this.size,.5*this.size,.5*this.size));var t=this.compoundBody.shapeOffsets[0].x,e=this.compoundBody.shapeOffsets[0].y,n=this.compoundBody.shapeOffsets[0].z;this.compoundBody.addShape(this.phantomShape,new r.AO(this.phantomX*this.size+t,this.phantomY*this.size+e,this.phantomZ*this.size+n)),this.phantomGroup.remove(this.phantomMesh),this._addPhantomBlock(this.phantomX,this.phantomY,this.phantomZ)}},{key:"_updatePhantomXYZ",value:function(){this.phantomX=this.x,this.phantomY=this.y,this.phantomZ=this.z}},{key:"_updateXYZ",value:function(){this.x=this.phantomX,this.y=this.phantomY,this.z=this.phantomZ}},{key:"acceptPhantomBlock",value:function(){this._updateXYZ(),this._addExistingBlock(),this._updateCenterOfMass(),this.phantomBlockAccepted=!0,this.currentLoopLength=this.gameLoopLength+1}},{key:"_addExistingBlock",value:function(){this.existingBlocks.push({x:this.x,y:this.y,z:this.z})}},{key:"_renderPhantomBlock",value:function(){this.phantomGroup=new h.ZAu,this.gg.add(this.phantomGroup)}},{key:"_renderInitialBlock",value:function(){this.compoundShapeGroup=new h.ZAu;var t=new h.DvJ(1,1,1),e=new h.xoR({color:16448250}),n=new h.Kj0(t,e);this.compoundShapeGroup.add(n),this.gg.add(this.compoundShapeGroup)}},{key:"animatePhantomGroup",value:function(){this.phantomGroup.position.copy(this.compoundBody.position),this.phantomGroup.quaternion.copy(this.compoundBody.quaternion)}},{key:"animateCompoundShapeGroup",value:function(){var t=this;this.compoundShapeGroup.position.copy(this.compoundBody.position),this.compoundShapeGroup.quaternion.copy(this.compoundBody.quaternion),this.compoundShapeGroup.children.forEach((function(e,n){var o=t.compoundBody.shapeOffsets[n],i=t.compoundBody.shapeOrientations[n];e.position.copy(o),e.quaternion.copy(i)}))}},{key:"_addCompoundBody",value:function(){var t=new r.xu(new r.AO(.5*this.size,.5*this.size,.5*this.size)),e=new r.F5("slippery");e.friction=.01,this.compoundBody=new r.uT({mass:this.mass,material:e}),this.compoundBody.position.set(0,0,0),this.compoundBody.quaternion.setFromEuler(0,0,0),this.compoundBody.addShape(t,new r.AO(this.x,this.y,this.z)),this._addExistingBlock(),this.world.addBody(this.compoundBody)}},{key:"_addGround",value:function(){var t=new r.F5("ground");t.friction=.5;var e=new r.xu(new r.AO(1.5,.5,1.5)),n=new r.uT({mass:0,material:t});n.addShape(e),n.quaternion.setFromEuler(0,0,0),n.position.set(this.groundX,this.groundY,this.groundZ),this.world.addBody(n)}},{key:"_initGame",value:function(){var t=new h.DvJ(3,1,3),e=new h.xoR({color:2195968}),n=new h.Kj0(t,e);n.position.y=-1,this.gg.add(n)}}]),t}(),l=(n(5079),function(){function t(e){(0,d.Z)(this,t),this.scene=void 0,this.camera=void 0,this.renderer=void 0,this.cameraRotationDepth=12,this.fov=45,this.nearPlane=1,this.farPlane=1e3,this.canvasId=e,this.clock=void 0,this.stats=void 0,this.ambientLight=void 0,this.directionalLight=void 0}return(0,u.Z)(t,[{key:"initialize",value:function(){var t=this;this.scene=new h.xsS,this.camera=new h.cPb(this.fov,window.innerWidth/window.innerHeight,1,1e3),this.camera.position.y=4;var e=document.getElementById(this.canvasId);this.renderer=new h.CP7({canvas:e,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.clock=new h.SUY,this.ambientLight=new h.Mig(16777215,.5),this.ambientLight.castShadow=!0,this.scene.add(this.ambientLight),this.directionalLight=new h.Ox3(16777215,1),this.directionalLight.position.set(0,32,64),this.scene.add(this.directionalLight),window.addEventListener("resize",(function(){return t.onWindowResize()}),!1)}},{key:"animate",value:function(){window.requestAnimationFrame(this.animate.bind(this)),this.render()}},{key:"render",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"udpateCameraPosition",value:function(){var t=Math.sin(.25*this.clock.getElapsedTime()),e=Math.cos(.25*this.clock.getElapsedTime());this.camera.position.x=this.cameraRotationDepth*t,this.camera.position.z=this.cameraRotationDepth*e,this.camera.lookAt(new h.Pa4(0,2,0))}},{key:"onWindowResize",value:function(){this.camera.aspect=window.innerWidth/window.innerHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(window.innerWidth,window.innerHeight)}}]),t}()),m=n(5893);var f=function(){return(0,s.useEffect)((function(){var t=new l("myThreeJsCanvas");t.initialize();var e=new p;t.scene.add(e.gg);new c(t.scene,e.world);var i=function(){var e,i=(e=a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(376).then(n.bind(n,4376));case 2:(new e.sent.GUI).add(t,"cameraRotationDepth",5,100).name("Camera Distance").onChange((function(t){}));case 5:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(i,a){var s=e.apply(t,n);function r(t){o(s,i,a,r,h,"next",t)}function h(t){o(s,i,a,r,h,"throw",t)}r(void 0)}))});return function(){return i.apply(this,arguments)}}();i();!function n(){var o=t.clock.getDelta();t.render(),e.update(o),e.animatePhantomGroup(),e.animateCompoundShapeGroup(),t.udpateCameraPosition(),requestAnimationFrame(n)}();var s=function(t){e.acceptPhantomBlock()},r=function(t){"Space"===t.code&&e.acceptPhantomBlock()};return window.addEventListener("click",s),window.addEventListener("keydown",r),function(){window.removeEventListener("click",s),window.removeEventListener("keydown",r)}}),[]),(0,m.jsxs)("div",{children:[(0,m.jsx)("a",{href:"https://thegamedex.com",children:(0,m.jsx)("div",{className:"absolute m-4 text-4xl",children:"\u2b05\ufe0f"})}),(0,m.jsx)("canvas",{id:"myThreeJsCanvas"})]})}},7815:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/frantic-arch",function(){return n(2354)}])},2777:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,{Z:function(){return o}})},2262:function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,{Z:function(){return i}})},5079:function(t,e){"use strict";var n=function(){var t=0,e=document.createElement("div");function o(t){return e.appendChild(t.dom),t}function i(n){for(var o=0;o<e.children.length;o++)e.children[o].style.display=o===n?"block":"none";t=n}e.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",e.addEventListener("click",(function(n){n.preventDefault(),i(++t%e.children.length)}),!1);var a=(performance||Date).now(),s=a,r=0,h=o(new n.Panel("FPS","#0ff","#002")),c=o(new n.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var d=o(new n.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:e,addPanel:o,showPanel:i,begin:function(){a=(performance||Date).now()},end:function(){r++;var t=(performance||Date).now();if(c.update(t-a,200),t>=s+1e3&&(h.update(1e3*r/(t-s),100),s=t,r=0,d)){var e=performance.memory;d.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){a=this.end()},domElement:e,setMode:i}};n.Panel=function(t,e,n){var o=1/0,i=0,a=Math.round,s=a(window.devicePixelRatio||1),r=80*s,h=48*s,c=3*s,d=2*s,u=3*s,p=15*s,l=74*s,m=30*s,f=document.createElement("canvas");f.width=r,f.height=h,f.style.cssText="width:80px;height:48px";var y=f.getContext("2d");return y.font="bold "+9*s+"px Helvetica,Arial,sans-serif",y.textBaseline="top",y.fillStyle=n,y.fillRect(0,0,r,h),y.fillStyle=e,y.fillText(t,c,d),y.fillRect(u,p,l,m),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(u,p,l,m),{dom:f,update:function(h,w){o=Math.min(o,h),i=Math.max(i,h),y.fillStyle=n,y.globalAlpha=1,y.fillRect(0,0,r,p),y.fillStyle=e,y.fillText(a(h)+" "+t+" ("+a(o)+"-"+a(i)+")",c,d),y.drawImage(f,u+s,p,l-s,m,u,p,l-s,m),y.fillRect(u+l-s,p,s,m),y.fillStyle=n,y.globalAlpha=.9,y.fillRect(u+l-s,p,s,a((1-h/w)*m))}}},e.Z=n}},function(t){t.O(0,[737,884,774,888,179],(function(){return e=7815,t(t.s=e);var e}));var e=t.O();_N_E=e}]);