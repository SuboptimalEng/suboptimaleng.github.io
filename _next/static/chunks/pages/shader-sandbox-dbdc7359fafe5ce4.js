(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[410],{3533:function(e,n,i){"use strict";i.d(n,{W:function(){return s}});var t=i(2777),o=i(2262),s=function(){function e(){(0,t.Z)(this,e)}return(0,o.Z)(e,null,[{key:"removeCanvas",value:function(){var e=document.getElementById("myThreeJsCanvas");e.parentNode.removeChild(e)}},{key:"maybeCreateCanvas",value:function(){var e=document.getElementById("myThreeJsCanvas");e||((e=document.createElement("canvas")).id="myThreeJsCanvas",document.body.appendChild(e))}}]),e}()},3019:function(e,n,i){"use strict";i.r(n),i.d(n,{default:function(){return f}});var t=i(7294),o=i(5985),s=i(5539),r=i(3533),a=i(2777),u=i(2262),d=i(9499),c=i(9477),h=i(5079),v=function(){function e(n){var i=this;(0,a.Z)(this,e),(0,d.Z)(this,"canvasId",void 0),(0,d.Z)(this,"fov",void 0),(0,d.Z)(this,"nearPlane",void 0),(0,d.Z)(this,"farPlane",void 0),(0,d.Z)(this,"uniforms",void 0),(0,d.Z)(this,"onWindowResize",void 0),(0,d.Z)(this,"onMouseMove",void 0),(0,d.Z)(this,"canvas",void 0),(0,d.Z)(this,"scene",void 0),(0,d.Z)(this,"camera",void 0),(0,d.Z)(this,"renderer",void 0),(0,d.Z)(this,"clock",void 0),(0,d.Z)(this,"stats",void 0),(0,d.Z)(this,"ambientLight",void 0),(0,d.Z)(this,"directionalLight",void 0),this.fov=45,this.nearPlane=1,this.farPlane=1e3,this.canvasId=n,this.uniforms={u_time:{type:"f",value:0},u_resolution:new c.xWb(new c.FM8(window.innerWidth,window.innerHeight)),u_mouse:new c.xWb(new c.FM8(0,0))},this.scene=new c.xsS,this.camera=new c.iKG,this.camera.position.z=10,this.canvas=document.getElementById(this.canvasId),this.renderer=new c.CP7({canvas:this.canvas,antialias:!0}),this.renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(this.renderer.domElement),this.clock=new c.SUY,this.stats=(0,h.Z)(),document.body.appendChild(this.stats.dom),this.ambientLight=new c.Mig(16777215,.5),this.ambientLight.castShadow=!0,this.scene.add(this.ambientLight),this.directionalLight=new c.Ox3(16777215,1),this.directionalLight.position.set(0,4,10),this.scene.add(this.directionalLight),this.onWindowResize=function(){console.log("resize"),i.camera.updateProjectionMatrix(),i.uniforms.u_resolution.value.x=window.innerWidth,i.uniforms.u_resolution.value.y=window.innerHeight,i.renderer.setSize(window.innerWidth,window.innerHeight)},this.onMouseMove=function(e){i.uniforms.u_mouse.value.x=e.pageX/window.innerWidth,i.uniforms.u_mouse.value.y=e.pageY/window.innerHeight},window.addEventListener("resize",this.onWindowResize),window.addEventListener("mousemove",this.onMouseMove)}return(0,u.Z)(e,[{key:"destroy",value:function(){for(;this.scene.children.length>0;)this.scene.remove(this.scene.children[0]);this.scene.removeFromParent(),this.camera.removeFromParent(),document.body.removeChild(this.stats.dom),window.removeEventListener("resize",this.onWindowResize),window.removeEventListener("mousemove",this.onMouseMove)}},{key:"update",value:function(){this.render(),this.stats.update()}},{key:"render",value:function(){this.uniforms.u_time.value+=this.clock.getDelta(),this.renderer.render(this.scene,this.camera)}}]),e}(),l=function e(n,i){(0,a.Z)(this,e),(0,d.Z)(this,"gg",void 0),(0,d.Z)(this,"uniforms",void 0),this.uniforms=n,this.gg=new c.ZAu;var t=new c.BKK(2,2),o=new c.jyz({uniforms:n,vertexShader:"\n      uniform float u_time;\n      uniform vec2 u_mouse;\n      uniform vec2 u_resolution;\n\n      void main() {\n        gl_Position = projectionMatrix\n          * modelViewMatrix\n          * vec4(position.x, position.y, position.z, 1.0);\n      }\n      ",fragmentShader:i}),s=new c.Kj0(t,o);this.gg.add(s)},m=i(5893);function f(){var e=(0,t.useRef)(0),n=(0,t.useState)(!1),i=n[0],a=n[1],u=(0,t.useState)("\nuniform float u_time;\nuniform vec2 u_mouse;\nuniform vec2 u_resolution;\n\nfloat rand(vec2 co) {\n  return fract(sin(dot(co, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main() {\n  vec2 uv = gl_FragCoord.xy / u_resolution;\n\n  float x = (uv.x + 1.0) / 2.0;\n  float y = (uv.y + 1.0) / 2.0;\n\n  vec3 green = vec3(x - y, 0.4, 0.0);\n\n  float xOpacity = floor(uv.x * 20.0) / 20.0;\n  float yOpacity = floor(uv.y * 20.0) / 20.0;\n  float randomOpacity = rand(vec2(xOpacity, yOpacity));\n  float minOpacity = 0.5 + randomOpacity * 0.5;\n\n  if (u_mouse.x < uv.x + 0.005 && u_mouse.x > uv.x - 0.005) {\n    gl_FragColor = vec4(0.75, 0, 0, 1);\n  } else if (1. - u_mouse.y < uv.y + 0.01 && 1. - u_mouse.y > uv.y - 0.01) {\n    gl_FragColor = vec4(0.75, 0, 0, 1);\n  } else {\n    gl_FragColor = vec4(green, minOpacity);\n  }\n}\n"),d=u[0],c=u[1];(0,t.useEffect)((function(){r.W.maybeCreateCanvas();var n=new v("myThreeJsCanvas"),i=new l(n.uniforms,d);n.scene.add(i.gg);return requestAnimationFrame((function i(t){n.update(),e.current=window.requestAnimationFrame(i)})),function(){console.log("on component unmount"),n.destroy(),window.cancelAnimationFrame(e.current),r.W.removeCanvas()}}),[d]);return(0,m.jsxs)("div",{children:[(0,m.jsx)("canvas",{id:"myThreeJsCanvas"}),(0,m.jsx)("div",{className:"absolute inset-x-8 inset-y-24",children:(0,m.jsxs)("div",{className:"flex flex-col h-full w-full place-items-center justify-center",children:[(0,m.jsx)("div",{className:"absolute -top-9 left-0",children:(0,m.jsx)("div",{onClick:function(){a(!i)},className:"border-2 p-1 bg-black text-white text-xs opacity-75",children:i?(0,m.jsx)("div",{children:"Hide Editor"}):(0,m.jsx)("div",{children:"Show Editor"})})}),i&&(0,m.jsx)(o.ZP,{theme:s.W,value:d,onChange:function(e){c(e)},width:"100%",height:"100%",className:"w-full h-full border-2 opacity-90"})]})})]})}},8010:function(e,n,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/shader-sandbox",function(){return i(3019)}])}},function(e){e.O(0,[737,762,284,774,888,179],(function(){return n=8010,e(e.s=n);var n}));var n=e.O();_N_E=n}]);