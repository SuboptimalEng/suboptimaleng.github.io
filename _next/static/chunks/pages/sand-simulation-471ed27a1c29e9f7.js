(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[13],{4747:function(t,n,e){"use strict";e.r(n),e.d(n,{default:function(){return l}});var s=e(7294);function i(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,s=new Array(n);e<n;e++)s[e]=t[e];return s}function o(t){return function(t){if(Array.isArray(t))return i(t)}(t)||function(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,n){if(t){if("string"===typeof t)return i(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(t,n):void 0}}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var r=e(2777),a=e(2262),h=e(9499),u=function(){function t(n){var e=this;(0,r.Z)(this,t),(0,h.Z)(this,"canvasId",void 0),(0,h.Z)(this,"canvas",void 0),(0,h.Z)(this,"cc",void 0),(0,h.Z)(this,"pixelWidth",void 0),(0,h.Z)(this,"pixelHeight",void 0),(0,h.Z)(this,"mouseX",0),(0,h.Z)(this,"mouseY",0),(0,h.Z)(this,"mouseDown",!1),(0,h.Z)(this,"rows",20),(0,h.Z)(this,"cols",20),(0,h.Z)(this,"sandbox",void 0),(0,h.Z)(this,"onMouseMove",(function(t){e.mouseDown&&(e.mouseX=t.clientX,e.mouseY=t.clientY)})),(0,h.Z)(this,"onMouseUp",(function(t){e.mouseDown=!1})),(0,h.Z)(this,"onMouseDown",(function(t){e.mouseDown=!0,e.mouseX=t.clientX,e.mouseY=t.clientY})),this.canvasId=n,this.canvas=document.getElementById(n),this.cc=this.canvas.getContext("2d"),this.pixelWidth=this.canvas.width/this.cols,this.pixelHeight=this.canvas.height/this.rows,this.sandbox=[];for(var s=0;s<this.rows;s++){var i=new Array(this.cols).fill(0);this.sandbox.push(o(i))}}return(0,a.Z)(t,[{key:"drawPixel",value:function(t,n,e){0===t?this.cc.fillStyle="white":1===t?this.cc.fillStyle="brown":2===t&&(this.cc.fillStyle="blue"),this.cc.fillRect(n*this.pixelWidth,e*this.pixelHeight,this.pixelWidth,this.pixelHeight)}},{key:"addEventListeners",value:function(){this.canvas.addEventListener("mouseup",this.onMouseUp),this.canvas.addEventListener("mousedown",this.onMouseDown),this.canvas.addEventListener("mousemove",this.onMouseMove)}},{key:"removeEventListeners",value:function(){this.canvas.removeEventListener("mouseup",this.onMouseUp),this.canvas.removeEventListener("mousedown",this.onMouseDown),this.canvas.removeEventListener("mousemove",this.onMouseMove)}},{key:"render",value:function(){for(var t=0;t<this.sandbox.length;t++)for(var n=0;n<this.sandbox[t].length;n++)this.drawPixel(this.sandbox[t][n],n,t)}},{key:"sandBlockOutOfBounds",value:function(t,n){return t>=this.sandbox.length-1||(0===n||n===this.sandbox[t].length-1)}},{key:"step",value:function(){for(var t=this.sandbox.length-1;t>=0;t--)for(var n=0;n<this.sandbox[t].length;n++)if(0!==this.sandbox[t][n]){if(1===this.sandbox[t][n]){if(this.sandBlockOutOfBounds(t,n))continue;0===this.sandbox[t+1][n]?(this.resetBlock(t,n),this.sandbox[t+1][n]=1):0===this.sandbox[t+1][n+1]?(this.resetBlock(t,n),this.sandbox[t+1][n+1]=1):0===this.sandbox[t+1][n-1]&&(this.resetBlock(t,n),this.sandbox[t+1][n-1]=1)}2===this.sandbox[t][n]&&(t+1<this.sandbox.length&&0===this.sandbox[t+1][n]?(this.resetBlock(t,n),this.sandbox[t+1][n]=2):t+1<this.sandbox.length&&0===this.sandbox[t+1][n+1]?(this.resetBlock(t,n),this.sandbox[t+1][n+1]=2):t+1<this.sandbox.length&&0===this.sandbox[t+1][n-1]?(this.resetBlock(t,n),this.sandbox[t+1][n-1]=2):n-1>0&&0===this.sandbox[t][n-1]?(this.resetBlock(t,n),this.sandbox[t][n-1]=2):n+1<this.sandbox[t].length&&0===this.sandbox[t][n+1]&&(this.resetBlock(t,n),this.sandbox[t][n+1]=2))}if(this.mouseDown){var e=this.canvas.getBoundingClientRect(),s=this.mouseX-e.left,i=this.mouseY-e.top,o=Math.round(i/this.cols),r=Math.round(s/this.rows);this.sandbox[o][r]=2}}},{key:"resetBlock",value:function(t,n){this.sandbox[t][n]=0}}]),t}(),c=e(5893);function l(){var t=(0,s.useRef)(0);return(0,s.useEffect)((function(){var n=new u("myCanvas");n.addEventListeners();var e=0;return requestAnimationFrame((function s(i){var o=Math.floor(i/50);e!==o&&(n.step(),n.render(),e=o),t.current=requestAnimationFrame(s)})),function(){n.removeEventListeners(),cancelAnimationFrame(t.current)}}),[]),(0,c.jsx)("div",{className:"flex h-screen justify-center place-items-center bg-black",children:(0,c.jsx)("canvas",{id:"myCanvas",className:"h-96 w-96"})})}},454:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/sand-simulation",function(){return e(4747)}])},2777:function(t,n,e){"use strict";function s(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}e.d(n,{Z:function(){return s}})},2262:function(t,n,e){"use strict";function s(t,n){for(var e=0;e<n.length;e++){var s=n[e];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function i(t,n,e){return n&&s(t.prototype,n),e&&s(t,e),t}e.d(n,{Z:function(){return i}})}},function(t){t.O(0,[774,888,179],(function(){return n=454,t(t.s=n);var n}));var n=t.O();_N_E=n}]);